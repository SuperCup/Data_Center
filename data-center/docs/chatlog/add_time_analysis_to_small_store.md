# 小店活动分析页面增加时段分析功能

## 任务概述
在 `SmallStoreActivityAnalysis.tsx` 文件中增加时段分析功能，包括：
1. 在折线图后增加时段分析模块，样式与 `ActivityAnalysis.tsx` 中的时段分析样式一致
2. 修改小店列表中点击查看时弹出的模态窗中的折线图，替换为时段分析的气泡图

## 具体修改内容

### 1. 增加时段分析模块
- **位置**: 在折线图组件后（第985行后）
- **功能**: 
  - 24小时×7天的热力图展示
  - 根据模拟销售额数据调整圆圈大小和透明度
  - 区分工作日（蓝色）和周末（红色）
  - 鼠标悬停显示详细信息
- **右侧统计信息**:
  - 销售额周内占比柱状图
  - 高峰时段、低峰时段、平均活跃度统计

### 2. 修改小店趋势模态窗
- **原功能**: 显示折线图趋势分析
- **新功能**: 显示时段分析气泡图
- **特点**:
  - 1000px宽度的模态窗
  - 左侧热力图 + 右侧统计信息布局
  - 基于选中小店的GMV数据生成模拟时段销售数据
  - 动态计算不同时段的销售强度

## 技术细节

### 时段分析热力图实现
```typescript
// 模拟时段销售数据算法
const baseAmount = selectedRetailerTrend.gmv / 1000; // 基础销售额
const hourFactor = hour >= 7 && hour <= 22 ? 
  (hour >= 11 && hour <= 13 ? 1.8 : // 午餐时间
   hour >= 18 && hour <= 20 ? 2.2 : // 晚餐时间
   hour >= 9 && hour <= 17 ? 1.2 : 0.6) : 0.3; // 其他时间
const dayFactor = dayIndex >= 5 ? 1.5 : 1.0; // 周末因子
const randomFactor = 0.7 + Math.random() * 0.6; // 随机因子
const amount = baseAmount * hourFactor * dayFactor * randomFactor;
```

### 样式特点
- 使用 CSS Grid 布局实现24×7的网格
- 圆圈大小范围：8px-24px
- 透明度范围：0.2-1.0
- 工作日颜色：#1890ff（蓝色）
- 周末颜色：#ff7875（红色）

## 文件修改列表
- `src/pages/client/store-marketing/SmallStoreActivityAnalysis.tsx`
  - 第985行后：增加时段分析模块（约200行代码）
  - 第1232行后：增加趋势模态窗（约180行代码）

## 测试结果
- ✅ 页面成功编译，无语法错误
- ✅ 时段分析模块正常显示
- ✅ 小店列表中的"查看"按钮可正常打开时段分析模态窗
- ✅ 热力图交互效果正常，鼠标悬停显示详细信息
- ✅ 右侧统计信息正常显示

## 完成状态
所有任务已完成：
1. ✅ 查看ActivityAnalysis.tsx中的时段分析实现代码
2. ✅ 在SmallStoreActivityAnalysis.tsx的折线图后增加时段分析模块
3. ✅ 修改小店列表中趋势模态窗的折线图为时段分析气泡图
4. ✅ 测试修改后的页面显示效果

---
*记录时间: 2025-01-27*
*修改文件: SmallStoreActivityAnalysis.tsx*
*功能状态: 已完成并测试通过*