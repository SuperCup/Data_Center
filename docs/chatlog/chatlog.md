# 数据中心项目对话记录

## 2024年12月30日 - 小门店营销看板修改

### 任务概述
用户要求修改小门店营销看板页面，包括：
1. 增加演示说明文字
2. 删除筛选栏中的平台切换功能
3. 删除发券渠道模块和SKU Top10模块
4. 修改零售商相关文本为门店
5. 更新核心指标和相关图形

### 已完成任务

#### 第一阶段修改（2024-12-30）
1. **增加演示说明**
   - 在标题"小门店营销看板"后增加了演示说明文字
   - 说明文字：（演示环境，数据仅供参考）

2. **删除平台切换功能**
   - 删除了筛选栏中的平台切换Radio组件
   - 替换为返回说明文字："返回上级页面请点击左侧导航"

3. **删除发券渠道模块**
   - 完全删除了发券渠道模块的Card组件及其内容
   - 包括平台分布饼图和相关数据展示

4. **删除SKU Top10模块**
   - 完全删除了SKU Top10模块的Card组件及其内容
   - 包括表格展示和排序功能

#### 第二阶段修改（2024-12-30）
5. **修改零售商为门店**
   - 将所有"零售商/机制Top10"改为"门店/机制Top10"
   - 修改相关注释和函数说明
   - 更新TabPane标签文本

6. **更新核心指标**
   - 将原有5个核心指标替换为新的6个指标：
     - 报名门店数（个）
     - 动销门店数（个）
     - 销售额（元）
     - 核销金额（元）
     - 核销份数（份）
     - 店均日产出（元）
   - 更新了数据结构和趋势数据
   - 修改了指标卡片的显示内容

7. **同步修改图形指标**
   - 更新折线图指标选择器为新的6个指标
   - 修改Tooltip formatter以正确显示新指标
   - 更新折线图的动态渲染逻辑
   - 修改门店/机制Top10的指标选择器
   - 更新visibleLines和retailerMetric的初始状态

#### 第三阶段修改（2025-01-01）
8. **门店和机制名称统一**
   - **门店名称**：确认与主看板（Dashboard.tsx）保持一致
     - 华润万家大卖场、沃尔玛、山姆、大润发、永辉、物美超市、麦德龙、大张盛德美、永旺、华润苏果便利店
   - **机制名称**：将原有的"满XX减XX"格式修改为"XX元乐享"格式
     - 满200减30 → 30元乐享
     - 满100减15 → 15元乐享
     - 满50减8 → 8元乐享
     - 满300减50 → 50元乐享
     - 满150减25 → 25元乐享
     - 满80减12 → 12元乐享
     - 满60减10 → 10元乐享
     - 满120减20 → 20元乐享
     - 满88减15 → 15元乐享
     - 满168减28 → 28元乐享

#### 第四阶段修改（2025-01-01）
9. **默认指标优化**
   - 将门店/机制Top10的默认选中指标从"报名门店数"修改为"销售额"
   - 修改 `retailerMetric` 状态的初始值从 `'registeredStores'` 改为 `'gmv'`
   - 页面加载时默认按销售额排序显示门店和机制数据
   - 提升用户体验，默认显示业务关注的核心指标

### 修改的文件
- `d:\Project\Data_Center\data-center\src\pages\client\store-marketing\SmalStoreDashboard.tsx`

### 技术细节
- 使用React Hooks进行状态管理
- 集成Ant Design组件库
- 使用Recharts图表库进行数据可视化
- 保持了原有的代码结构和样式风格
- 确保了数据格式化和显示的一致性
- 统一门店名称与主看板保持一致
- 批量修改机制名称格式，提取减免金额作为乐享金额
- 优化默认指标选择，提升用户体验

### 页面效果
修改后的页面更适合作为演示环境使用，去除了不必要的模块，简化了界面，同时更新了核心指标以更好地反映门店营销的关键数据。门店和机制名称已统一规范，默认指标优化为销售额，用户可以通过 http://localhost:3000 访问修改后的页面。

---

*最后更新时间：2025-01-01*